[gd_scene load_steps=23 format=4 uid="uid://bpmu3ocn57tvc"]

[ext_resource type="TileSet" uid="uid://ctmqnw8pktlk6" path="res://Resource/BaseTileMap.tres" id="1_3tfs0"]
[ext_resource type="Texture2D" uid="uid://b1pqlfjyggr7f" path="res://Images/pipo-charachip021e.png" id="1_71c1r"]
[ext_resource type="Script" path="res://Script/PlayerCharacter.gd" id="1_mer0e"]
[ext_resource type="Texture2D" uid="uid://btvqtshsrkii3" path="res://Images/sticon3b-3.png" id="4_nxhlk"]
[ext_resource type="Script" path="res://Script/HpEntityNode.gd" id="5_didg4"]
[ext_resource type="Script" path="res://Script/HeartUiPresenter.gd" id="5_vgluc"]
[ext_resource type="Texture2D" uid="uid://cstiwewb0iqv2" path="res://Images/sticon3a-2.png" id="6_q01vt"]
[ext_resource type="Script" path="res://Script/GameOverUiPresenter.gd" id="7_ausck"]

[sub_resource type="AtlasTexture" id="AtlasTexture_4o6cp"]
atlas = ExtResource("1_71c1r")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_sx0tx"]
atlas = ExtResource("1_71c1r")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_t4fy6"]
atlas = ExtResource("1_71c1r")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_masth"]
atlas = ExtResource("1_71c1r")
region = Rect2(0, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gotqb"]
atlas = ExtResource("1_71c1r")
region = Rect2(32, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_e5as8"]
atlas = ExtResource("1_71c1r")
region = Rect2(64, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_f1f3k"]
atlas = ExtResource("1_71c1r")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_pxy5q"]
atlas = ExtResource("1_71c1r")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_k1p2m"]
atlas = ExtResource("1_71c1r")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_apxa2"]
atlas = ExtResource("1_71c1r")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kohgm"]
atlas = ExtResource("1_71c1r")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_w007c"]
atlas = ExtResource("1_71c1r")
region = Rect2(64, 64, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_22q25"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4o6cp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sx0tx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t4fy6")
}],
"loop": true,
"name": &"walk_back",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_masth")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gotqb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e5as8")
}],
"loop": true,
"name": &"walk_forward",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_f1f3k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pxy5q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k1p2m")
}],
"loop": true,
"name": &"walk_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_apxa2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kohgm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w007c")
}],
"loop": true,
"name": &"walk_right",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ri7xy"]
size = Vector2(70, 70)

[node name="root" type="Node"]

[node name="Map" type="Node" parent="."]

[node name="Ground" type="TileMapLayer" parent="Map"]
scale = Vector2(2, 2)
tile_map_data = PackedByteArray("AAACAAMAAAAGAAEAAAADAAMAAAAGAAEAAAAEAAMAAAAGAAEAAAAFAAMAAAAGAAEAAAAGAAMAAAAGAAEAAAAHAAMAAAAGAAEAAAAIAAMAAAAGAAEAAAAIAAQAAAAGAAEAAAAJAAQAAAAGAAEAAAAKAAQAAAAGAAEAAAALAAQAAAAGAAEAAAAMAAQAAAAGAAEAAAANAAQAAAAGAAEAAAANAAMAAAAGAAEAAAAMAAMAAAAGAAEAAAALAAMAAAAGAAEAAAAKAAMAAAAGAAEAAAAJAAMAAAAGAAEAAAACAAQAAAAGAAEAAAACAAUAAAAGAAEAAAACAAYAAAAGAAEAAAACAAcAAAAGAAEAAAADAAcAAAAGAAEAAAAEAAcAAAAGAAEAAAAFAAcAAAAGAAEAAAAGAAcAAAAGAAEAAAAHAAcAAAAGAAEAAAAIAAcAAAAGAAEAAAAJAAcAAAAGAAEAAAAKAAcAAAAGAAEAAAALAAcAAAAGAAEAAAAMAAcAAAAGAAEAAAANAAcAAAAGAAEAAAANAAYAAAAGAAEAAAANAAUAAAAGAAEAAAAMAAUAAAAGAAEAAAALAAUAAAAGAAEAAAAKAAUAAAAGAAEAAAAJAAUAAAAGAAEAAAAIAAUAAAAGAAEAAAAHAAUAAAAGAAEAAAAGAAUAAAAGAAEAAAAGAAQAAAAGAAEAAAAFAAQAAAAGAAEAAAAEAAQAAAAGAAEAAAADAAQAAAAGAAEAAAADAAUAAAAGAAEAAAAHAAQAAAAGAAEAAAAFAAUAAAAGAAEAAAAEAAUAAAAGAAEAAAADAAYAAAAGAAEAAAAEAAYAAAAGAAEAAAAFAAYAAAAGAAEAAAAGAAYAAAAGAAEAAAAHAAYAAAAGAAEAAAAIAAYAAAAGAAEAAAAJAAYAAAAGAAEAAAAKAAYAAAAGAAEAAAALAAYAAAAGAAEAAAAMAAYAAAAGAAEAAAAOAAMAAAAGAAEAAAAOAAQAAAAGAAEAAAAOAAUAAAAGAAEAAAAOAAYAAAAGAAEAAAAOAAcAAAAGAAEAAAAOAAgAAAAGAAEAAAANAAgAAAAGAAEAAAAMAAgAAAAGAAEAAAALAAgAAAAGAAEAAAAKAAgAAAAGAAEAAAAJAAgAAAAGAAEAAAAIAAgAAAAGAAEAAAAHAAgAAAAGAAEAAAAGAAgAAAAGAAEAAAAFAAgAAAAGAAEAAAAEAAgAAAAGAAEAAAADAAgAAAAGAAEAAAACAAgAAAAGAAEAAAADAAIAAAAGAAEAAAAEAAIAAAAGAAEAAAACAAIAAAAGAAEAAAAFAAIAAAAGAAEAAAAGAAIAAAAGAAEAAAAHAAIAAAAGAAEAAAAIAAIAAAAGAAEAAAAJAAIAAAAGAAEAAAAKAAIAAAAGAAEAAAALAAIAAAAGAAEAAAAMAAIAAAAGAAEAAAANAAIAAAAGAAEAAAAOAAIAAAAGAAEAAAAPAAIAAAAGAAEAAAAPAAMAAAAGAAEAAAAPAAQAAAAGAAEAAAAPAAUAAAAGAAEAAAAPAAYAAAAGAAEAAAAPAAcAAAAGAAEAAAAPAAgAAAAGAAEAAAACAAkAAAAGAAEAAAADAAkAAAAGAAEAAAAEAAkAAAAGAAEAAAAFAAkAAAAGAAEAAAAGAAkAAAAGAAEAAAAHAAkAAAAGAAEAAAAIAAkAAAAGAAEAAAAJAAkAAAAGAAEAAAAKAAkAAAAGAAEAAAALAAkAAAAGAAEAAAAMAAkAAAAGAAEAAAANAAkAAAAGAAEAAAAOAAkAAAAGAAEAAAAPAAkAAAAGAAEAAAAQAAIAAAAGAAEAAAAQAAMAAAAGAAEAAAAQAAQAAAAGAAEAAAAQAAUAAAAGAAEAAAAQAAYAAAAGAAEAAAAQAAcAAAAGAAEAAAAQAAgAAAAGAAEAAAAQAAkAAAAGAAEAAAABAAEAAAAGAAEAAAACAAEAAAAGAAEAAAADAAEAAAAGAAEAAAAEAAEAAAAGAAEAAAAFAAEAAAAGAAEAAAAGAAEAAAAGAAEAAAAHAAEAAAAGAAEAAAAIAAEAAAAGAAEAAAAJAAEAAAAGAAEAAAAKAAEAAAAGAAEAAAALAAEAAAAGAAEAAAAMAAEAAAAGAAEAAAANAAEAAAAGAAEAAAAOAAEAAAAGAAEAAAAPAAEAAAAGAAEAAAAQAAEAAAAGAAEAAAABAAIAAAAGAAEAAAABAAMAAAAGAAEAAAABAAQAAAAGAAEAAAABAAUAAAAGAAEAAAABAAYAAAAGAAEAAAABAAcAAAAGAAEAAAABAAgAAAAGAAEAAAABAAkAAAAGAAEAAAARAAEAAAAGAAEAAAARAAIAAAAGAAEAAAARAAMAAAAGAAEAAAARAAQAAAAGAAEAAAARAAUAAAAGAAEAAAARAAYAAAAGAAEAAAARAAcAAAAGAAEAAAARAAgAAAAGAAEAAAARAAkAAAAGAAEAAAA=")
tile_set = ExtResource("1_3tfs0")

[node name="Water" type="TileMapLayer" parent="Map"]
scale = Vector2(2, 2)
tile_map_data = PackedByteArray("AAAAAAAAAQAGAAEAAAABAAAAAQAGAAEAAAACAAAAAQAGAAEAAAADAAAAAQAGAAEAAAAEAAAAAQAGAAEAAAAFAAAAAQAGAAEAAAAGAAAAAQAGAAEAAAAHAAAAAQAGAAEAAAAIAAAAAQAGAAEAAAAJAAAAAQAGAAEAAAAKAAAAAQAGAAEAAAALAAAAAQAGAAEAAAAMAAAAAQAGAAEAAAANAAAAAQAGAAEAAAAOAAAAAQAGAAEAAAAPAAAAAQAGAAEAAAAQAAAAAQAGAAEAAAARAAAAAQAGAAEAAAASAAAAAQAGAAEAAAAAAAEAAQAGAAEAAAAAAAIAAQAGAAEAAAAAAAMAAQAGAAEAAAAAAAQAAQAGAAEAAAAAAAUAAQAGAAEAAAAAAAYAAQAGAAEAAAAAAAcAAQAGAAEAAAAAAAgAAQAGAAEAAAAAAAkAAQAGAAEAAAASAAEAAQAGAAEAAAASAAIAAQAGAAEAAAASAAMAAQAGAAEAAAASAAQAAQAGAAEAAAASAAUAAQAGAAEAAAASAAYAAQAGAAEAAAASAAcAAQAGAAEAAAASAAgAAQAGAAEAAAASAAkAAQAGAAEAAAAAAAoAAQAGAAEAAAABAAoAAQAGAAEAAAACAAoAAQAGAAEAAAADAAoAAQAGAAEAAAAEAAoAAQAGAAEAAAAFAAoAAQAGAAEAAAAGAAoAAQAGAAEAAAAHAAoAAQAGAAEAAAAIAAoAAQAGAAEAAAAJAAoAAQAGAAEAAAAKAAoAAQAGAAEAAAALAAoAAQAGAAEAAAAMAAoAAQAGAAEAAAANAAoAAQAGAAEAAAAOAAoAAQAGAAEAAAAPAAoAAQAGAAEAAAAQAAoAAQAGAAEAAAARAAoAAQAGAAEAAAASAAoAAQAGAAEAAAABAAkAAQAEAAQAAAACAAkAAQAGAAAAAAADAAkAAQAGAAAAAAAEAAkAAQAGAAAAAAAFAAkAAQAGAAAAAAAGAAkAAQAGAAAAAAAHAAkAAQAGAAAAAAAIAAkAAQAGAAAAAAAJAAkAAQAGAAAAAAAKAAkAAQAGAAAAAAALAAkAAQAGAAAAAAAMAAkAAQAGAAAAAAANAAkAAQAGAAAAAAAOAAkAAQAGAAAAAAAPAAkAAQAGAAAAAAAQAAkAAQAGAAAAAAARAAkAAQAFAAQAAAARAAEAAQAFAAMAAAAQAAEAAQAGAAIAAAAPAAEAAQAGAAIAAAAOAAEAAQAGAAIAAAANAAEAAQAGAAIAAAAMAAEAAQAGAAIAAAALAAEAAQAGAAIAAAAKAAEAAQAGAAIAAAAJAAEAAQAGAAIAAAAIAAEAAQAGAAIAAAAHAAEAAQAGAAIAAAAGAAEAAQAGAAIAAAAFAAEAAQAGAAIAAAAEAAEAAQAGAAIAAAADAAEAAQAGAAIAAAACAAEAAQAGAAIAAAABAAEAAQAEAAMAAAABAAIAAQAHAAEAAAABAAMAAQAHAAEAAAABAAQAAQAHAAEAAAABAAUAAQAHAAEAAAABAAYAAQAHAAEAAAABAAcAAQAHAAEAAAABAAgAAQAHAAEAAAARAAgAAQAFAAEAAAARAAcAAQAFAAEAAAARAAYAAQAFAAEAAAARAAUAAQAFAAEAAAARAAQAAQAFAAEAAAARAAMAAQAFAAEAAAARAAIAAQAFAAEAAAA=")
tile_set = ExtResource("1_3tfs0")

[node name="CharacterBody2D" type="CharacterBody2D" parent="."]
position = Vector2(169, 195)
script = ExtResource("1_mer0e")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="CharacterBody2D"]
scale = Vector2(2, 2)
sprite_frames = SubResource("SpriteFrames_22q25")
animation = &"walk_right"

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D"]
scale = Vector2(0.75, 0.93)
shape = SubResource("RectangleShape2D_ri7xy")

[node name="UI" type="Node2D" parent="."]
visible = false

[node name="Heart1" type="Sprite2D" parent="UI"]
position = Vector2(40, 30)
scale = Vector2(2, 2)
texture = ExtResource("4_nxhlk")

[node name="Heart2" type="Sprite2D" parent="UI"]
position = Vector2(93, 30)
scale = Vector2(2, 2)
texture = ExtResource("4_nxhlk")

[node name="Heart3" type="Sprite2D" parent="UI"]
position = Vector2(145, 30)
scale = Vector2(2, 2)
texture = ExtResource("4_nxhlk")

[node name="GameOverText" type="RichTextLabel" parent="UI"]
z_index = 360
offset_left = 283.0
offset_top = 290.0
offset_right = 938.0
offset_bottom = 429.0
size_flags_horizontal = 6
size_flags_vertical = 4
theme_override_font_sizes/normal_font_size = 80
bbcode_enabled = true
text = "[center][wave amp=50 freq=2]GameOver[/wave][/center]"

[node name="GameOverPanel" type="Panel" parent="UI"]
visible = false
z_index = 300
offset_left = -40.0
offset_top = -13.0
offset_right = 1259.0
offset_bottom = 708.0

[node name="Presenter" type="Node" parent="."]

[node name="HeartUIPresenter" type="Node" parent="Presenter" node_paths=PackedStringArray("_hp", "_hp_sprites")]
script = ExtResource("5_vgluc")
_hp = NodePath("../../Entitis/HP")
_hp_sprites = [NodePath("../../UI/Heart1"), NodePath("../../UI/Heart2"), NodePath("../../UI/Heart3")]
_normal_heart = ExtResource("4_nxhlk")
_lost_heart = ExtResource("6_q01vt")

[node name="GameOverUIPresenter" type="Node" parent="Presenter" node_paths=PackedStringArray("_hp", "_gameover_text", "_gameover_panel")]
script = ExtResource("7_ausck")
_hp = NodePath("../../Entitis/HP")
_gameover_text = NodePath("../../UI/GameOverText")
_gameover_panel = NodePath("../../UI/GameOverPanel")

[node name="Entitis" type="Node" parent="."]

[node name="HP" type="Node" parent="Entitis"]
script = ExtResource("5_didg4")
